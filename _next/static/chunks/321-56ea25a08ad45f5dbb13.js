(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[321],{74857:function(e,n,t){"use strict";n.ZP=void 0;var r={shared:{label:"\n      display: block;\n      position: relative;\n      cursor: pointer;\n      -webkit-user-select: none;\n      -moz-user-select: none;\n      -ms-user-select: none;\n      user-select: none;\n      height: 1em;\n      line-height: 1em;\n      padding-left: 1.5em;\n\n      &:focus-within {\n        outline: 4px solid #3B99FC;\n        outline-offset: 1px;\n      }\n    ",input:"\n      position: absolute;\n      opacity: 0;\n      cursor: pointer;\n      height: 0;\n      width: 0;\n\n      &:checked ~ .dot {\n        background-color: #ffffff;\n      }\n\n      &:checked ~ .dot:after {\n        display: block;\n      }\n    ",dot:'\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 1em;\n      height: 1em;\n      border-radius: 50%;\n      box-shadow: 0px 0px 0px 2px #606060 inset;\n\n      &:after {\n        content: "";\n        position: absolute;\n        display: none;\n        top: 50%;\n        left: 50%;\n        width: 0.5em;\n        height: 0.5em;\n        border-radius: 50%;\n        background: #606060;\n        transform: translate(-50%, -50%);\n      }\n    '},size:{small:{container:"\n        font-size: 0.8rem;\n      "},medium:{container:"\n        font-size: 1rem;\n      "},large:{container:"\n        font-size: 1.2rem;\n      "}}};var i=(0,t(63236).applyTheme)(r,{defaultProps:{size:"medium"},staticProps:[]});n.ZP=i},63236:function(e,n,t){"use strict";var r=t(95318);Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.applyTheme=void 0;var i=r(t(22122)),a=r(t(19756)),o=r(t(67294)),s=r(t(86010)),c=t(80927),l=function(e,n){var t=(0,c.processStyle)(e),r=(0,c.createStyleBuilder)(t,n),l=r((n.as||{}).container||"div","container"),u=r("label","label"),d=r("input","input"),h=r("span","dot"),f=(0,c.createBootstrap)(t,"radio");return function(e){var n=f(e),t=n.id,r=n.name,c=n.label,p=n.ariaLabel,m=n.styleProps,v=n.className,x=n.rest,b=x.style,g=x.labelStyle,j=x.inputStyle,y=x.dotStyle,w=(0,a.default)(x,["style","labelStyle","inputStyle","dotStyle"]);return o.default.createElement(l,(0,i.default)({},m,{style:b,className:(0,s.default)("pg-radio",v)}),o.default.createElement(u,(0,i.default)({},m,{htmlFor:t,style:g,className:"pg-radio-label"}),o.default.createElement(d,(0,i.default)({"aria-label":p},w,{type:"radio",id:t,name:r,style:j,className:"pg-radio-input"})),o.default.createElement(h,(0,i.default)({},m,{style:y,className:"dot"})),c))}};n.applyTheme=l;var u=l({},{});n.default=u},92665:function(e,n,t){"use strict";var r=t(85893),i=t(27261),a=t(6434),o=t(29163);function s(){var e=(0,i.Z)(["\n  list-style: none;\n  margin: 0;\n  & li {\n    margin: 0;\n  }\n"]);return s=function(){return e},e}function c(){var e=(0,i.Z)(["\n  font-weight: 600;\n"]);return c=function(){return e},e}function l(){var e=(0,i.Z)(["\n  font-size: unset;\n  & tr {\n    display: flex;\n    margin-bottom: 5px;\n    & > td {\n      border: none;\n      padding: 0 5px 0 0;\n    }\n  }\n"]);return l=function(){return e},e}var u=o.default.table(l()),d=o.default.span(c()),h=o.default.ul(s()),f=function(e){var n=e.list,t=e.title,i=e.inline,a=void 0!==i&&i;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:t}),(1===(null===n||void 0===n?void 0:n.length)||a)&&(0,r.jsx)(d,{children:null===n||void 0===n?void 0:n.map((function(e,t){return(0,r.jsxs)("span",{children:[e,t!==n.length-1&&", "," "]},e)}))})]}),!a&&((null===n||void 0===n?void 0:n.length)||0)>1&&(0,r.jsx)("tr",{children:(0,r.jsx)("td",{children:(0,r.jsx)(d,{children:(0,r.jsx)(h,{children:null===n||void 0===n?void 0:n.map((function(e){return(0,r.jsx)("li",{children:e},e)}))})})})})]})},p=function(e){return!!e&&(1!==e.length||""!==e[0])};n.Z=function(e){var n,t=e.request;return t?(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(u,{children:(0,r.jsxs)("tbody",{children:[(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Are you accountable for this project?"}),(0,r.jsx)("td",{children:(0,r.jsx)(d,{children:(n=null===t||void 0===t?void 0:t.projectLead,void 0===n?"":n?"Yes":"No")})})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Client Type:"}),(0,r.jsx)("td",{children:(0,r.jsx)(d,{children:null!==t&&void 0!==t&&t.publicAccess?"Public":"Confidential"})})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Project Name:"}),(0,r.jsx)("td",{children:(0,r.jsx)(d,{children:null===t||void 0===t?void 0:t.projectName})})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Default email address:"}),(0,r.jsx)("td",{children:(0,r.jsx)(d,{children:null===t||void 0===t?void 0:t.preferredEmail})})]}),(0,r.jsx)(f,{list:null===t||void 0===t?void 0:t.additionalEmails,title:"Additional Emails:"}),(0,r.jsx)(f,{list:(0,a.LF)(null===t||void 0===t?void 0:t.realm),title:"Identity Providers Required:",inline:!0}),p(null===t||void 0===t?void 0:t.devValidRedirectUris)&&(0,r.jsx)(f,{list:null===t||void 0===t?void 0:t.devValidRedirectUris,title:"Dev Redirect URIs:"}),p(null===t||void 0===t?void 0:t.testValidRedirectUris)&&(0,r.jsx)(f,{list:null===t||void 0===t?void 0:t.testValidRedirectUris,title:"Test Redirect URIs:"}),p(null===t||void 0===t?void 0:t.prodValidRedirectUris)&&(0,r.jsx)(f,{list:null===t||void 0===t?void 0:t.prodValidRedirectUris,title:"Prod Redirect URIs:"})]})})}):null}},80721:function(e,n,t){"use strict";var r=t(85893),i=t(27261),a=t(29163),o=t(30454),s=t(74150);function c(){var e=(0,i.Z)(["\n  margin-top: ",";\n"]);return c=function(){return e},e}function l(){var e=(0,i.Z)(["\n  &&& {\n    margin-left: 20px;\n  }\n"]);return l=function(){return e},e}function u(){var e=(0,i.Z)(["\n  & li {\n    margin: 0;\n  }\n"]);return u=function(){return e},e}function d(){var e=(0,i.Z)(["\n  text-transform: uppercase;\n  margin-bottom: 0;\n  font-size: ",";\n"]);return d=function(){return e},e}var h=a.default.h2(d(),o.CA),f=a.default.ul(u()),p=a.default.li(l()),m=a.default.div(c(),o.SI);n.Z=function(){return(0,r.jsxs)(m,{children:[(0,r.jsx)(h,{children:"Requirements"}),(0,r.jsxs)(f,{children:[(0,r.jsx)("li",{children:"Keep your email address active, and if you are not using your integration, clean it up"}),(0,r.jsxs)("li",{children:["If you are not using your client app configuration"," ",(0,r.jsx)(s.ZP,{external:!0,href:"https://chat.developer.gov.bc.ca/channel/sso/",children:"ask us"})," ","for help"]})]}),(0,r.jsx)(h,{children:"We're a Community"}),(0,r.jsxs)(f,{children:[(0,r.jsxs)("li",{children:["As part of a community, we can solve things together and quickly. Please join the"," ",(0,r.jsx)(s.ZP,{external:!0,href:"https://chat.developer.gov.bc.ca/channel/sso/",children:"#SSO channel on Rocket.Chat"})]}),(0,r.jsxs)("li",{children:["Please follow the",(0,r.jsx)(s.ZP,{external:!0,href:"https://digital.gov.bc.ca/resources/digital-principles",target:"_blank",rel:"noreferrer",children:"BC Government digital standards"})]}),(0,r.jsx)("li",{children:"Coordinate load testing with the Pathfinder SSO Team, and please only use the Test environment"}),(0,r.jsxs)("li",{children:["The SSO Service is multitenancy; meaning you share with others, so please coordinate with us (",(0,r.jsx)(s.ZP,{external:!0,href:"https://chat.developer.gov.bc.ca/channel/sso/",children:"#SSO channel on Rocket.Chat"})," ","or email at ",(0,r.jsx)(s.ZP,{href:"mailto:bcgov.sso@gov.bc.ca",children:"bcgov.sso@gov.bc.ca"}),") :",(0,r.jsxs)("ul",{children:[(0,r.jsxs)(p,{children:["if you predict moderate or high loads",(0,r.jsx)("br",{}),"OR",(0,r.jsx)("br",{})]}),(0,r.jsx)(p,{children:"if you need to conduct load testing in TEST only"})]})]})]}),(0,r.jsx)(h,{children:"What's included in the service"}),(0,r.jsx)(f,{children:(0,r.jsx)("li",{children:"The Standard realm is configured to meet the general needs of the community. Currently, custom configurations, such as scopes or flows, are not available"})}),(0,r.jsx)(h,{children:"Understanding the service level"}),(0,r.jsxs)(f,{children:[(0,r.jsxs)("li",{children:['We are working towards enterprise service levels and in the interim the SSO Pathfinder service level is "best-effort" during business hours (Monday to Friday, 9am to 5pm), and after-hours resolution time is not guaranteed.',(0,r.jsx)("p",{children:(0,r.jsx)("strong",{children:'Please take this into account if you have a "critical" application'})})]}),(0,r.jsx)("li",{children:"From time to time, we may contact you to confirm if your configuration is needed"})]})]})}},47321:function(e,n,t){"use strict";t.d(n,{Z:function(){return gn}});var r=t(85893),i=t(809),a=t.n(i),o=t(64121),s=t(92447),c=t(26265),l=t(27261),u=t(67294),d=t(29163);function h(){var e=(0,l.Z)(["\n  font-weight: lighter;\n  color: #003366;\n  margin: 0;\n"]);return h=function(){return e},e}var f=d.default.h1(h()),p=t(96486);function m(e){var n=e.formStage,t=e.id,i=(0,p.padStart)(String(t),8,"0"),a=["".concat(t?"Req ID: ".concat(i," - "):"","Enter requester information"),"Req ID: ".concat(i," - Choose providers and provide URIs"),"Req ID: ".concat(i," - Terms and Conditions"),"Req ID: ".concat(i," - Review and Submit")];return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(f,{children:a[n]})})}var v=t(17625),x=t(51436);function b(){var e=(0,l.Z)(["\n  width: 100px;\n  margin: 0;\n"]);return b=function(){return e},e}function g(){var e=(0,l.Z)(["\n  height: 40px;\n  width: 40px;\n  text-align: center;\n  line-height: 40px;\n  border-radius: 40px;\n  border: 1px solid #b9d8f0;\n  background-color: white;\n  font-weight: bold;\n"]);return g=function(){return e},e}function j(){var e=(0,l.Z)(["\n  height: 60px;\n  width: 200px;\n  background-color: #ebf7ff;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  border-radius: 5px;\n  padding: 20px;\n  cursor: pointer;\n  margin: 3px 0;\n  font-weight: ",";\n  color: ",";\n  background-color: ",";\n  border: ",";\n"]);return j=function(){return e},e}var y=d.default.div(j(),(function(e){return e.active&&"bold"}),(function(e){return e.active||e.visited?"#003366":"#B0D4ED"}),(function(e){return e.active||e.visited?"#BCE4FF":"#F5FBFF"}),(function(e){return e.active||e.visited?"1px solid #006fc4":"1px solid #B9D8F0"})),w=d.default.div(g()),S=d.default.p(b());function Z(e){var n=e.stageNumber,t=e.title,i=e.active,a=e.visited,o=e.handleClick,s=e.hasError;return(0,r.jsxs)(y,{active:i||!1,visited:a||!1,onClick:o,children:[(0,r.jsx)(w,{children:s?(0,r.jsx)(v.G,{icon:x.eHv,color:"red",title:"Some additional fields require your attention."}):n}),(0,r.jsx)(S,{children:t})]})}var k=t(64735);function C(){var e=(0,l.Z)(["\n  width: 824px;\n  max-width: 100%;\n"]);return C=function(){return e},e}var P=d.default.div(C());function O(e){var n=e.currentStage,t=e.setFormStage,i=e.errors,a=e.creatingNewForm,o=e.visited,s=e.stages;return(0,r.jsx)(P,{children:(0,r.jsx)(k.ZP,{cols:4,children:(0,r.jsx)(k.ZP.Row,{collapse:"992",gutter:[],children:null===s||void 0===s?void 0:s.map((function(e){return(0,r.jsx)(k.ZP.Col,{children:(0,r.jsx)(Z,{title:e.title,stageNumber:e.number+1,active:e.number===n,hasError:!!i[e.number],visited:o[e.number],handleClick:function(){return function(e){a()||t(e)}(e.number)}},e.number)},e.title)}))})})})}var F=t(17849);function T(e){var n=e.classNames,t=e.help,i=e.description,a=e.errors,o=e.children;return(0,r.jsxs)("div",{className:n,children:[i,o,a,t]})}var D=t(60873);function E(){var e=(0,l.Z)(["\n  font-weight: bold;\n  font-size: 1rem;\n  margin: 0;\n"]);return E=function(){return e},e}var R=d.default.legend(E());function q(e){var n=e.classNames,t=e.label,i=e.help,a=e.errors,o=e.children,s=e.schema,c=s.tooltipTitle,l=s.tooltipContent,u=s.hide,d=void 0===u?250:u,h=s.description,f=s.displayTitle;return(0,r.jsxs)("div",{className:n,children:[(0,r.jsxs)(R,{children:[f||t,"\xa0",l&&(0,r.jsx)(D.Z,{tooltipTitle:c,tooltipContent:l,hide:d})]}),h,o,a,i]})}var I=t(30454),N=t(57120);function A(){var e=(0,l.Z)(["\n  color: #dc3545;\n  margin: 0;\n  padding: 0;\n"]);return A=function(){return e},e}var B=d.default.span(A());function U(){var e=(0,l.Z)(["\n  grid-column: 2;\n  color: #7f7f7f;\n"]);return U=function(){return e},e}function z(){var e=(0,l.Z)(["\n  font-weight: bold;\n  cursor: pointer;\n"]);return z=function(){return e},e}function V(){var e=(0,l.Z)(["\n  display: grid;\n  grid-template-columns: 20px 1fr;\n  align-items: center;\n  margin-top: ",";\n  cursor: pointer;\n"]);return V=function(){return e},e}var L=d.default.div(V(),I.SI),G=d.default.label(z()),M=d.default.p(U());function W(e){var n=e.rawErrors,t=n&&n.length>0;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(L,{onClick:function(){window.location.hash=N.zw},children:[(0,r.jsx)(v.G,{style:{color:"#006fc4"},icon:x.KtF,onClick:e.onAddClick,title:"Add Item"}),(0,r.jsx)(G,{children:"Create a new team (optional)"}),(0,r.jsx)(M,{children:"Add other members to help manage the integration, and re-use your teams across multiple integrations"})]}),t&&(0,r.jsx)(B,{children:n[0]})]})}var _=t(50308),Y=t.n(_),H=t(69696);function J(){var e=(0,l.Z)(["\n  display: flex;\n  align-items: center;\n\n  & .pg-modal-main {\n    margin: auto;\n  }\n\n  z-index: 100;\n"]);return J=function(){return e},e}var K=(0,d.default)(H.ZP)(J()),$=t(4826),Q=t(74857),X=t(74150);function ee(){var e=(0,l.Z)(["\n  margin-bottom: 10px;\n"]);return ee=function(){return e},e}function ne(){var e=(0,l.Z)(["\n  display: flex;\n  justify-content: space-between;\n"]);return ne=function(){return e},e}function te(){var e=(0,l.Z)(["\n  margin: 0;\n"]);return te=function(){return e},e}var re=d.default.h2(te()),ie=d.default.div(ne()),ae=(0,d.default)(Q.ZP)(ee());var oe=function(e){var n=e.id,t=e.open,i=e.onChange,o=void 0===i?Y():i,c=(0,u.useState)("server"),l=c[0],d=c[1],h=(0,u.useState)(null),f=h[0],p=h[1];(0,u.useEffect)((function(){window.location.hash=t?n:"#"}),[t]);var m=function(){d("server"),p(null),window.location.hash="#"},v=function(){var e=(0,s.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o("cancel"),m();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=(0,s.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o("server"===l&&!0===f?"confidential":"public"),m();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b="server"!==l||null!==f,g=b&&"server"===l&&!0===f;return(0,r.jsxs)(K,{id:n,children:[(0,r.jsx)(H.ZP.Header,{children:(0,r.jsx)(re,{children:"Choosing between Public and Confidential Client types"})}),(0,r.jsxs)(H.ZP.Content,{children:[(0,r.jsx)("h3",{children:"Which type of application are you using?"}),(0,r.jsx)(ae,{name:"type",label:"Server-side (ex. .Net, Java, PHP)",checked:"server"===l,onChange:function(){return d("server")}}),(0,r.jsx)(ae,{name:"type",label:"Javascript (ex. Single Page Application, Hybrid Mobile)",checked:"javascript"===l,onChange:function(){return d("javascript")}}),(0,r.jsx)(ae,{name:"type",label:"Other (ex. Embedded devices, Internet of Things (Apple TV)",checked:"other"===l,onChange:function(){return d("other")}}),"server"===l&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("br",{}),(0,r.jsx)("h3",{children:"Does the framework require a client secret, or have an option for a secret?"}),(0,r.jsx)(ae,{name:"secret",label:"Yes",checked:!0===f,onChange:function(){return p(!0)}}),(0,r.jsx)(ae,{name:"secret",label:"No",checked:!1===f,onChange:function(){return p(!1)}})]}),b&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("br",{}),(0,r.jsx)(r.Fragment,{children:g?(0,r.jsxs)("span",{children:["Based on your response, we recommend that you use a ",(0,r.jsx)("strong",{children:"confidential client."})," Confidential clients have back-end components that securely store an application's secret."]}):(0,r.jsxs)("span",{children:["Based on your response, we recommend that you use a ",(0,r.jsx)("strong",{children:"public client."})," Public clients do not use back-end secrets, but may support your application's architecture better."]})}),(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("span",{children:[" ","To learn more about the difference between confidential and public clients, visit our"," ",(0,r.jsx)(X.ZP,{external:!0,href:"https://github.com/bcgov/ocp-sso/wiki/Using-Your-SSO-Client#confidential-vs-private-client",children:"wiki page."})]})}),(0,r.jsx)("br",{})]}),(0,r.jsx)("br",{}),(0,r.jsxs)(ie,{children:[(0,r.jsx)($.ZP,{type:"submit",variant:"primary-inverse",onClick:v,children:"Cancel"}),(0,r.jsx)($.ZP,{type:"submit",variant:"primary",onClick:x,disabled:!b,children:"Save and Close"})]})]})]})};function se(){var e=(0,l.Z)(["\n  margin-top: 5px;\n  margin-bottom: 5px;\n\n  & > input {\n    margin-right: 5px;\n  }\n"]);return se=function(){return e},e}var ce=d.default.div(se()),le=function(e){var n=e.id,t=e.value,i=e.onChange,a=e.onBlur,o=e.schema,s=o.enum,c=o.enumNames,l=(0,u.useState)(!1),d=l[0],h=l[1];return(0,r.jsxs)("div",{children:[c.map((function(e,o){return(0,r.jsxs)(ce,{children:[(0,r.jsx)("input",{type:"radio",id:"".concat(n,"-").concat(e),name:n,value:e,checked:s[o]===t,onChange:function(){return i(s[o])},onBlur:function(){return a(n,t)}}),(0,r.jsx)("label",{htmlFor:"".concat(n,"-").concat(e),children:e})]},e)})),(0,r.jsxs)("div",{children:[(0,r.jsx)(X.ZP,{onClick:function(){return h(!0)},style:{cursor:"pointer"},children:"Click here"})," ","to get help deciding which client type to use."]}),(0,r.jsx)(oe,{id:"client-helper",open:d,onChange:function(e){h(!1),"cancel"!==e&&i("public"===e)}})]})},ue=function(e){return{identityProviders:{"ui:widget":"checkboxes","ui:disabled":"true","ui:help":"Currently we only support the onestopauth realm and IDPs cant be changed."},projectLead:{"ui:widget":"radio","ui:readonly":e,"ui:FieldTemplate":q},newToSso:{"ui:widget":"radio","ui:FieldTemplate":q},preferredEmail:{"ui:FieldTemplate":T,"ui:readonly":!0},publicAccess:{"ui:widget":le,"ui:FieldTemplate":q},projectName:{"ui:FieldTemplate":T,"ui:placeholder":"Project Name"},usesTeam:{"ui:widget":"radio","ui:FieldTemplate":q,"ui:readonly":e},realm:{"ui:widget":"radio","ui:FieldTemplate":q,"ui:default":"onestopauth"},bceidTo:{"ui:FieldTemplate":T,"ui:readonly":!0},bceidCc:{"ui:FieldTemplate":T},bceidBody:{"ui:widget":"textarea"},dev:{"ui:readonly":!0,"ui:FieldTemplate":q},createTeam:{"ui:FieldTemplate":W}}},de=t(37605),he=t(98806),fe=t(6645),pe=t(3083),me=t(11163),ve=t(6434),xe=t(25879),be=t(92665),ge=t(12070),je={comment:{"ui:FieldTemplate":T,"ui:widget":"textarea"}},ye=t(8366);function we(e){e.bceidEmailDetails,e.setBceidEmailDetails;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{children:"Once you submit the request, both you and the BCeID team will receive an email with your request details."}),(0,r.jsx)("p",{children:"On a best-effort basis, the BCeID team will endeavour to reach out to you within 2-3 business days to schedule an on-boarding meeting.\xa0"})]})}var Se=t(85330);var Ze=(0,xe.l)((function(e){var n=e.formData,t=e.setFormData,i=e.setErrors,c=e.alert,l=e.isAdmin,d=e.teams,h=(0,u.useState)({}),f=h[0],m=h[1],v=(0,me.useRouter)(),x=(0,ve.Jx)(n.realm),b=x&&n.prod,g=function(){var e=(0,s.Z)(a().mark((function e(){var t,r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,fe.WN)(n,!0);case 3:t=e.sent,r=(0,o.Z)(t,2),(i=r[1])?c.show({variant:"danger",fadeOut:1e4,closable:!0,content:(0,ve.nU)(i).message}):(c.show({variant:"success",fadeOut:1e4,closable:!0,content:"Request ID:".concat((0,p.padStart)(String(n.id),8,"0")," is successfully submitted!")}),v.push({pathname:l?"/admin-dashboard":"/my-requests",query:{id:n.id}})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=l?(0,ye.K)(d):(0,ye.a)(d),t=(0,ve.G$)(n,e);if(Object.keys(t).length>0)return c.show({variant:"danger",fadeOut:1e4,closable:!0,content:"There were errors with your submission. Please see the navigation tabs above for the form pages with errors."}),i(t);window.location.hash="confirmation-modal"},y=function(){var e=l?"/admin-dashboard":"/my-requests";v.push(e)},w=l?"Cancel":"Save and Close",S=l?"Update":"Submit";return(0,r.jsxs)("div",{children:[(0,r.jsx)(Se.wk,{title:"Please review your information to make sure it is correct.",number:1,children:(0,r.jsx)(be.Z,{request:n,hasBceid:x||!1,isAdmin:l})}),(0,r.jsx)(Se.wk,{title:"Your ".concat(x?"Dev and/or Test":""," environment(s) will be provided by the SSO Pathfinder team."),number:2,children:(0,r.jsx)("p",{children:"Once you submit the request, access will be provided in 20 minutes or fewer."})}),l&&(0,r.jsx)(F.Z,{schema:ge.Z,uiSchema:je,liveValidate:!0,onChange:function(e){t(e.formData)},formData:n,children:(0,r.jsx)(r.Fragment,{})}),b?(0,r.jsxs)(Se.wk,{number:3,title:"Your Prod environment will be provided by the BCeID Team",showLine:!1,children:[(0,r.jsx)(we,{bceidEmailDetails:f,setBceidEmailDetails:m}),(0,r.jsx)(de.Z,{text:{continue:S,back:w},show:!0,handleSubmit:j,handleBackClick:y})]}):(0,r.jsx)(de.Z,{text:{continue:S,back:w},show:!0,handleSubmit:j,handleBackClick:y}),(0,r.jsx)(he.Z,{id:"confirmation-modal",content:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{children:"Are you sure you're ready to submit your request?"}),!l&&(0,r.jsxs)("p",{children:["If you need to change anything after submitting your request, please contact our"," ",(0,r.jsx)(X.ZP,{external:!0,href:"https://chat.developer.gov.bc.ca/channel/sso/",children:"#SSO channel"})," ","or email ",(0,r.jsx)(X.ZP,{href:"mailto:bcgov.sso@gov.bc.ca",children:"bcgov.sso@gov.bc.ca"})]})]}),onConfirm:g})]})})),ke=t(80721),Ce=t(94679),Pe=t(70513),Oe=function(){var e=(0,s.Z)(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Pe.e.get("teams").then((function(e){return e.data}));case 3:return n=e.sent,e.abrupt("return",[n,null]);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",(0,Pe.z)(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),Fe=function(){var e=(0,s.Z)(a().mark((function e(n){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Pe.e.post("teams",n).then((function(e){return e.data}));case 3:return t=e.sent,e.abrupt("return",[t,null]);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",(0,Pe.z)(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n){return e.apply(this,arguments)}}(),Te=t(75093);var De=t(40355);function Ee(e){return function(e){if(Array.isArray(e))return(0,Te.Z)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||(0,De.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Re,qe=t(11915),Ie=t(35611),Ne=new Uint8Array(16);function Ae(){if(!Re&&!(Re="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Re(Ne)}var Be=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var Ue=function(e){return"string"===typeof e&&Be.test(e)},ze=[],Ve=0;Ve<256;++Ve)ze.push((Ve+256).toString(16).substr(1));var Le=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=(ze[e[n+0]]+ze[e[n+1]]+ze[e[n+2]]+ze[e[n+3]]+"-"+ze[e[n+4]]+ze[e[n+5]]+"-"+ze[e[n+6]]+ze[e[n+7]]+"-"+ze[e[n+8]]+ze[e[n+9]]+"-"+ze[e[n+10]]+ze[e[n+11]]+ze[e[n+12]]+ze[e[n+13]]+ze[e[n+14]]+ze[e[n+15]]).toLowerCase();if(!Ue(t))throw TypeError("Stringified UUID is invalid");return t};var Ge=function(e,n,t){var r=(e=e||{}).random||(e.rng||Ae)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,n){t=t||0;for(var i=0;i<16;++i)n[t+i]=r[i];return n}return Le(r)},Me=t(31607);function We(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function _e(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?We(Object(t),!0).forEach((function(n){(0,c.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):We(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function Ye(){var e=(0,l.Z)(["\n  display: flex;\n  justify-content: space-between;\n  margin-top: 20px;\n  & button {\n    min-width: 180px;\n  }\n"]);return Ye=function(){return e},e}function He(){var e=(0,l.Z)(["\n  align-self: center;\n  color: red;\n  cursor: pointer;\n"]);return He=function(){return e},e}function Je(){var e=(0,l.Z)(["\n  grid-template-columns: 2fr 2fr 1fr;\n  align-items: start;\n  margin-bottom: 20px;\n"]);return Je=function(){return e},e}function Ke(){var e=(0,l.Z)(["\n  max-height: 50vh;\n  overflow-y: scroll;\n"]);return Ke=function(){return e},e}function $e(){var e=(0,l.Z)(["\n  margin: 10px 0;\n  cursor: pointer;\n\n  & span {\n    margin-left: 5px;\n  }\n"]);return $e=function(){return e},e}function Qe(){var e=(0,l.Z)(["\n  border-bottom: 1px solid black;\n  margin: 10px 0;\n  grid-column: 1 / 3;\n"]);return Qe=function(){return e},e}function Xe(){var e=(0,l.Z)(["\n  & .pg-select-wrapper {\n    height: 44px;\n  }\n"]);return Xe=function(){return e},e}function en(){var e=(0,l.Z)(["\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  align-items: end;\n  margin-bottom: 20px;\n  grid-gap: 1em;\n"]);return en=function(){return e},e}var nn=d.default.div(en()),tn=(0,d.default)(Ie.ZP)(Xe()),rn=d.default.div(Qe()),an=d.default.span($e()),on=d.default.section(Ke()),sn=(0,d.default)(nn)(Je()),cn=(0,d.default)(v.G)(He()),ln=d.default.div(Ye());function un(e){var n=e.onSubmit,t=(0,u.useState)([{email:"",role:"user",id:String(Ge())}]),i=t[0],c=t[1],l=(0,u.useState)(null),d=l[0],h=l[1],f=(0,u.useState)(!1),p=f[0],m=f[1],b=(0,u.useState)(null),g=b[0],j=b[1],y=function(e){var n={members:[]},t=!1;return e.name||(n.name="Please enter a name",t=!0),e.members.forEach((function(e,r){e.email||(n.members[r]="Please enter an email",t=!0)})),t?n:(j(null),null)},w=function(){var e=(0,s.Z)(a().mark((function e(){var t,r,s,c,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=y(t={name:d,members:i}))){e.next=4;break}return e.abrupt("return",j(r));case 4:return m(!0),e.next=7,Fe(t);case 7:return s=e.sent,c=(0,o.Z)(s,2),(l=c[1])&&console.error(l),e.next=13,n();case 13:m(!1),window.location.hash="#";case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,r.jsxs)("div",{children:[(0,r.jsx)(qe.ZP,{label:"Team Name",onChange:function(e){h(e.target.value)}}),g&&g.name&&(0,r.jsx)(B,{children:null===g||void 0===g?void 0:g.name}),(0,r.jsx)("br",{}),(0,r.jsx)("strong",{children:"Team Members"}),(0,r.jsxs)("p",{children:["Enter your team member\u2019s email address and they will be sent an invitation to join the project. Once they accept the invitation, they will have access to your project. Their invitation will expire in"," ",(0,r.jsx)("strong",{children:"2 business days"}),"."]}),(0,r.jsx)("br",{}),(0,r.jsxs)(on,{children:[(0,r.jsxs)(nn,{children:[(0,r.jsx)("strong",{children:"Member"}),(0,r.jsx)("strong",{children:"Role"}),(0,r.jsx)(rn,{})]}),i.map((function(e,n){return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(sn,{children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(qe.ZP,{placeholder:"Enter email address",onChange:function(e){return function(e,n){var t=_e({},i[e]);t.email=n.target.value;var r=Ee(i);r[e]=t,c(r)}(n,e)},value:e.email}),g&&g.members&&g.members[n]&&(0,r.jsx)(B,{children:g.members[n]})]}),(0,r.jsxs)(tn,{label:"Role",onChange:function(e){return function(e,n){var t=_e({},i[e]);t.role=n.target.value;var r=Ee(i);r[e]=t,c(r)}(n,e)},children:[(0,r.jsx)("option",{value:"user",children:"user"}),(0,r.jsx)("option",{value:"admin",children:"admin"})]}),0!==n&&(0,r.jsx)(cn,{icon:x.uMC,onClick:function(){return e=n,void c(i.filter((function(n,t){return t!==e})));var e},title:"Delete"})]},e.id)})})),(0,r.jsxs)(an,{onClick:function(){c([].concat(Ee(i),[{email:"",role:"user",id:String(Ge())}]))},children:[(0,r.jsx)(v.G,{style:{color:"#006fc4"},icon:x.KtF,title:"Add Item"}),(0,r.jsx)("span",{children:"Add another team member"})]})]}),(0,r.jsxs)(ln,{children:[(0,r.jsx)(Se.zx,{variant:"secondary",onClick:function(){window.location.hash="#"},children:"Cancel"}),(0,r.jsx)(Se.zx,{type:"button",onClick:w,children:p?(0,r.jsx)(Me.Z,{type:"Grid",color:"#FFF",height:18,width:50,visible:p}):"Send Invitation"})]})]})}function dn(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function hn(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?dn(Object(t),!0).forEach((function(n){(0,c.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):dn(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function fn(){var e=(0,l.Z)(["\n  color: #d94532;\n  font-weight: bold;\n"]);return fn=function(){return e},e}function pn(){var e=(0,l.Z)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  min-height: 150px;\n"]);return pn=function(){return e},e}function mn(){var e=(0,l.Z)(["\n  margin: 0;\n"]);return mn=function(){return e},e}var vn=d.default.p(mn()),xn=d.default.div(pn()),bn=d.default.p(fn());var gn=(0,xe.l)((function(e){var n=e.currentUser,t=void 0===n?{}:n,i=e.request,c=e.alert,l=e.isAdmin,d=(0,u.useState)(i||{}),h=d[0],f=d[1],p=(0,u.useState)(i?1:0),v=p[0],x=p[1],b=(0,u.useState)(!1),g=b[0],j=b[1],y=(0,u.useState)(void 0),w=y[0],S=y[1],Z=(0,u.useState)(!1),k=Z[0],C=Z[1],P=(0,u.useState)({}),T=P[0],D=P[1],E=(0,u.useState)(i?{0:!0}:{}),R=E[0],q=E[1],I=(0,u.useState)([]),A=I[0],B=I[1],U=(0,u.useState)(!1),z=U[0],V=U[1],L=(0,me.useRouter)(),G=(0,ve.J$)({isAdmin:l,formStage:v,teams:A}),M=G.stages,W=G.stageTitle,_=G.schema,Y=G.schemas,H=!l&&(0!==v||h.usesTeam||h.projectLead);(0,u.useEffect)((function(){h.preferredEmail||f(hn(hn({},h),{},{preferredEmail:t.email||""}))}),[t]);var J=function(){var e=(0,s.Z)(a().mark((function e(){var n,t,r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe();case 2:n=e.sent,t=(0,o.Z)(n,2),r=t[0],(i=t[1])?console.error(i):B(r||[]);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,u.useEffect)((function(){J()}),[]);var K=function(e){R[v]=!0,3===e&&(R[0]=!0,R[1]=!0,R[2]=!0);var n=(0,ve.G$)(h,Y,R);D(n),x(e),q(R),c.hide()},$=function(){return L.route.endsWith("/request")},Q=ue(!$()),ee=function(){var e=(0,s.Z)(a().mark((function e(){var n,t,r,i,s,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j(!0),e.prev=1,!$()){e.next=19;break}return e.next=5,(0,fe.hG)(h);case 5:if(n=e.sent,t=(0,o.Z)(n,2),r=t[0],i=t[1],s=(r||{}).id,!i&&s){e.next=13;break}return j(!1),e.abrupt("return");case 13:return c=l?"/admin-dashboard":"/request/".concat(s),e.next=16,L.push({pathname:c});case 16:f(hn(hn({},h),{},{id:s})),e.next=22;break;case 19:return e.next=21,(0,fe.WN)(h);case 21:ne();case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(1),console.error(e.t0);case 27:j(!1);case 28:case"end":return e.stop()}}),e,null,[[1,24]])})));return function(){return e.apply(this,arguments)}}(),ne=function(){var e=(0,s.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==v){e.next=5;break}if(!$()){e.next=5;break}return R[v]=!0,q(R),e.abrupt("return");case 5:K(v+1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),te=function(){var e=(0,s.Z)(a().mark((function e(n,t){var r,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!$()&&!l){e.next=2;break}return e.abrupt("return");case 2:if(!i){e.next=11;break}return C(!0),e.next=6,(0,fe.WN)(hn(hn({},h),{},{id:i.id}));case 6:r=e.sent,s=(0,o.Z)(r,2),s[1]||S({content:"Last saved at ".concat((new Date).toLocaleString()),error:!1}),C(!1);case 11:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),re=i?"Save and Close":"Cancel";return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(xn,{children:[(0,r.jsx)(m,{formStage:v,id:h.id}),(0,r.jsx)(O,{currentStage:v,setFormStage:K,errors:T,creatingNewForm:$,visited:R,stages:M}),(0,r.jsxs)(vn,{children:["If new to SSO, please visit"," ",(0,r.jsx)(X.ZP,{external:!0,href:"https://github.com/bcgov/ocp-sso/wiki/Using-Your-SSO-Client",children:"github"})," ","for more information."]})]}),"Terms and conditions"===W&&(0,r.jsx)(ke.Z,{}),N.Hg.includes(W)&&(0,r.jsx)(Ze,{formData:h,setErrors:D,errors:T,visited:R,saving:k,saveMessage:w,isAdmin:l,setFormData:f,teams:A}),N.al.includes(W)&&(0,r.jsx)(F.Z,{schema:_,uiSchema:Q,onChange:function(e){var n=!1===e.formData.projectLead&&!1===e.formData.usesTeam,t=!1===h.usesTeam&&!0===e.formData.usesTeam;f(t?hn(hn({},e.formData),{},{projectLead:void 0}):e.formData),n?(window.location.hash="info-modal",V(!0)):V(!1)},onSubmit:ee,formData:h,ArrayFieldTemplate:pe.Z,onBlur:te,liveValidate:R[v]||l,validate:Ce.M,children:(0,r.jsx)(de.Z,{formSubmission:0===v,text:{continue:"Next",back:re},show:H,loading:g,handleSubmit:ne,handleBackClick:function(){var e=l?"/admin-dashboard":"/my-requests";L.push({pathname:e})},saving:k,saveMessage:w})}),"Requester Info"===W&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(he.Z,{id:"info-modal",content:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{children:"If you are not accountable for this project, please refer this request to someone who is."}),(0,r.jsx)("p",{children:" Only the person who is responsible for this project can submit the intergration request."})]}),icon:!1,onConfirm:function(){window.location.hash="#"},confirmText:"Close",showCancel:!1,title:"Project Accountability",buttonStyle:"custom",buttonAlign:"center",closable:!0}),(0,r.jsx)(he.Z,{title:"Create a new team",icon:null,onConfirm:function(){return console.log("confirm")},id:N.zw,content:(0,r.jsx)(un,{onSubmit:J}),showCancel:!1,showConfirm:!1,closable:!0}),z&&(0,r.jsx)(bn,{children:"If you are not accountable for this request, please refer this request to someone who is. Only the responsible person can submit the integration request."})]})]})}))}}]);