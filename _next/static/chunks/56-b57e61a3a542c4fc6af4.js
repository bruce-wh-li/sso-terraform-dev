(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[56],{74857:function(e,n,t){"use strict";n.ZP=void 0;var r={shared:{label:"\n      display: block;\n      position: relative;\n      cursor: pointer;\n      -webkit-user-select: none;\n      -moz-user-select: none;\n      -ms-user-select: none;\n      user-select: none;\n      height: 1em;\n      line-height: 1em;\n      padding-left: 1.5em;\n\n      &:focus-within {\n        outline: 4px solid #3B99FC;\n        outline-offset: 1px;\n      }\n    ",input:"\n      position: absolute;\n      opacity: 0;\n      cursor: pointer;\n      height: 0;\n      width: 0;\n\n      &:checked ~ .dot {\n        background-color: #ffffff;\n      }\n\n      &:checked ~ .dot:after {\n        display: block;\n      }\n    ",dot:'\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 1em;\n      height: 1em;\n      border-radius: 50%;\n      box-shadow: 0px 0px 0px 2px #606060 inset;\n\n      &:after {\n        content: "";\n        position: absolute;\n        display: none;\n        top: 50%;\n        left: 50%;\n        width: 0.5em;\n        height: 0.5em;\n        border-radius: 50%;\n        background: #606060;\n        transform: translate(-50%, -50%);\n      }\n    '},size:{small:{container:"\n        font-size: 0.8rem;\n      "},medium:{container:"\n        font-size: 1rem;\n      "},large:{container:"\n        font-size: 1.2rem;\n      "}}};var i=(0,t(63236).applyTheme)(r,{defaultProps:{size:"medium"},staticProps:[]});n.ZP=i},63236:function(e,n,t){"use strict";var r=t(95318);Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.applyTheme=void 0;var i=r(t(22122)),a=r(t(19756)),o=r(t(67294)),s=r(t(86010)),c=t(80927),l=function(e,n){var t=(0,c.processStyle)(e),r=(0,c.createStyleBuilder)(t,n),l=r((n.as||{}).container||"div","container"),u=r("label","label"),d=r("input","input"),h=r("span","dot"),f=(0,c.createBootstrap)(t,"radio");return function(e){var n=f(e),t=n.id,r=n.name,c=n.label,p=n.ariaLabel,m=n.styleProps,v=n.className,x=n.rest,g=x.style,b=x.labelStyle,j=x.inputStyle,y=x.dotStyle,w=(0,a.default)(x,["style","labelStyle","inputStyle","dotStyle"]);return o.default.createElement(l,(0,i.default)({},m,{style:g,className:(0,s.default)("pg-radio",v)}),o.default.createElement(u,(0,i.default)({},m,{htmlFor:t,style:b,className:"pg-radio-label"}),o.default.createElement(d,(0,i.default)({"aria-label":p},w,{type:"radio",id:t,name:r,style:j,className:"pg-radio-input"})),o.default.createElement(h,(0,i.default)({},m,{style:y,className:"dot"})),c))}};n.applyTheme=l;var u=l({},{});n.default=u},92665:function(e,n,t){"use strict";var r=t(85893),i=t(27261),a=t(6434),o=t(29163);function s(){var e=(0,i.Z)(["\n  list-style: none;\n  margin: 0;\n  & li {\n    margin: 0;\n  }\n"]);return s=function(){return e},e}function c(){var e=(0,i.Z)(["\n  font-weight: 600;\n"]);return c=function(){return e},e}function l(){var e=(0,i.Z)(["\n  font-size: unset;\n  & tr {\n    display: flex;\n    margin-bottom: 5px;\n    & > td {\n      border: none;\n      padding: 0 5px 0 0;\n    }\n  }\n"]);return l=function(){return e},e}var u=o.default.table(l()),d=o.default.span(c()),h=o.default.ul(s()),f=function(e){var n=e.list,t=e.title,i=e.inline,a=void 0!==i&&i;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:t}),(1===(null===n||void 0===n?void 0:n.length)||a)&&(0,r.jsx)(d,{children:null===n||void 0===n?void 0:n.map((function(e,t){return(0,r.jsxs)("span",{children:[e,t!==n.length-1&&", "," "]},e)}))})]}),!a&&((null===n||void 0===n?void 0:n.length)||0)>1&&(0,r.jsx)("tr",{children:(0,r.jsx)("td",{children:(0,r.jsx)(d,{children:(0,r.jsx)(h,{children:null===n||void 0===n?void 0:n.map((function(e){return(0,r.jsx)("li",{children:e},e)}))})})})})]})},p=function(e){return!!e&&(1!==e.length||""!==e[0])};n.Z=function(e){var n,t=e.request;return t?(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(u,{children:(0,r.jsxs)("tbody",{children:[(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Are you accountable for this project?"}),(0,r.jsx)("td",{children:(0,r.jsx)(d,{children:(n=null===t||void 0===t?void 0:t.projectLead,void 0===n?"":n?"Yes":"No")})})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Client Type:"}),(0,r.jsx)("td",{children:(0,r.jsx)(d,{children:null!==t&&void 0!==t&&t.publicAccess?"Public":"Confidential"})})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Project Name:"}),(0,r.jsx)("td",{children:(0,r.jsx)(d,{children:null===t||void 0===t?void 0:t.projectName})})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Default email address:"}),(0,r.jsx)("td",{children:(0,r.jsx)(d,{children:null===t||void 0===t?void 0:t.preferredEmail})})]}),(0,r.jsx)(f,{list:null===t||void 0===t?void 0:t.additionalEmails,title:"Additional Emails:"}),(0,r.jsx)(f,{list:(0,a.LF)(null===t||void 0===t?void 0:t.realm),title:"Identity Providers Required:",inline:!0}),p(null===t||void 0===t?void 0:t.devValidRedirectUris)&&(0,r.jsx)(f,{list:null===t||void 0===t?void 0:t.devValidRedirectUris,title:"Dev Redirect URIs:"}),p(null===t||void 0===t?void 0:t.testValidRedirectUris)&&(0,r.jsx)(f,{list:null===t||void 0===t?void 0:t.testValidRedirectUris,title:"Test Redirect URIs:"}),p(null===t||void 0===t?void 0:t.prodValidRedirectUris)&&(0,r.jsx)(f,{list:null===t||void 0===t?void 0:t.prodValidRedirectUris,title:"Prod Redirect URIs:"})]})})}):null}},80721:function(e,n,t){"use strict";var r=t(85893),i=t(27261),a=t(29163),o=t(30454),s=t(74150);function c(){var e=(0,i.Z)(["\n  margin-top: ",";\n"]);return c=function(){return e},e}function l(){var e=(0,i.Z)(["\n  &&& {\n    margin-left: 20px;\n  }\n"]);return l=function(){return e},e}function u(){var e=(0,i.Z)(["\n  & li {\n    margin: 0;\n  }\n"]);return u=function(){return e},e}function d(){var e=(0,i.Z)(["\n  text-transform: uppercase;\n  margin-bottom: 0;\n  font-size: ",";\n"]);return d=function(){return e},e}var h=a.default.h2(d(),o.CA),f=a.default.ul(u()),p=a.default.li(l()),m=a.default.div(c(),o.SI);n.Z=function(){return(0,r.jsxs)(m,{children:[(0,r.jsx)(h,{children:"Requirements"}),(0,r.jsxs)(f,{children:[(0,r.jsx)("li",{children:"Keep your email address active, and if you are not using your integration, clean it up"}),(0,r.jsxs)("li",{children:["If you are not using your client app configuration"," ",(0,r.jsx)(s.ZP,{external:!0,href:"https://chat.developer.gov.bc.ca/channel/sso/",children:"ask us"})," ","for help"]})]}),(0,r.jsx)(h,{children:"We're a Community"}),(0,r.jsxs)(f,{children:[(0,r.jsxs)("li",{children:["As part of a community, we can solve things together and quickly. Please join the"," ",(0,r.jsx)(s.ZP,{external:!0,href:"https://chat.developer.gov.bc.ca/channel/sso/",children:"#SSO channel on Rocket.Chat"})]}),(0,r.jsxs)("li",{children:["Please follow the",(0,r.jsx)(s.ZP,{external:!0,href:"https://digital.gov.bc.ca/resources/digital-principles",target:"_blank",rel:"noreferrer",children:"BC Government digital standards"})]}),(0,r.jsx)("li",{children:"Coordinate load testing with the Pathfinder SSO Team, and please only use the Test environment"}),(0,r.jsxs)("li",{children:["The SSO Service is multitenancy; meaning you share with others, so please coordinate with us (",(0,r.jsx)(s.ZP,{external:!0,href:"https://chat.developer.gov.bc.ca/channel/sso/",children:"#SSO channel on Rocket.Chat"})," ","or email at ",(0,r.jsx)(s.ZP,{href:"mailto:bcgov.sso@gov.bc.ca",children:"bcgov.sso@gov.bc.ca"}),") :",(0,r.jsxs)("ul",{children:[(0,r.jsxs)(p,{children:["if you predict moderate or high loads",(0,r.jsx)("br",{}),"OR",(0,r.jsx)("br",{})]}),(0,r.jsx)(p,{children:"if you need to conduct load testing in TEST only"})]})]})]}),(0,r.jsx)(h,{children:"What's included in the service"}),(0,r.jsx)(f,{children:(0,r.jsx)("li",{children:"The Standard realm is configured to meet the general needs of the community. Currently, custom configurations, such as scopes or flows, are not available"})}),(0,r.jsx)(h,{children:"Understanding the service level"}),(0,r.jsxs)(f,{children:[(0,r.jsxs)("li",{children:['We are working towards enterprise service levels and in the interim the SSO Pathfinder service level is "best-effort" during business hours (Monday to Friday, 9am to 5pm), and after-hours resolution time is not guaranteed.',(0,r.jsx)("p",{children:(0,r.jsx)("strong",{children:'Please take this into account if you have a "critical" application'})})]}),(0,r.jsx)("li",{children:"From time to time, we may contact you to confirm if your configuration is needed"})]})]})}},10056:function(e,n,t){"use strict";t.d(n,{Z:function(){return mn}});var r=t(85893),i=t(809),a=t.n(i),o=t(64121),s=t(92447),c=t(26265),l=t(27261),u=t(67294),d=t(29163);function h(){var e=(0,l.Z)(["\n  font-weight: lighter;\n  color: #003366;\n  margin: 0;\n"]);return h=function(){return e},e}var f=d.default.h1(h()),p=t(96486);function m(e){var n=e.formStage,t=e.id,i=(0,p.padStart)(String(t),8,"0"),a=["".concat(t?"Req ID: ".concat(i," - "):"","Enter requester information"),"Req ID: ".concat(i," - Choose providers and provide URIs"),"Req ID: ".concat(i," - Terms and Conditions"),"Req ID: ".concat(i," - Review and Submit")];return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(f,{children:a[n]})})}var v=t(17625),x=t(51436);function g(){var e=(0,l.Z)(["\n  width: 100px;\n  margin: 0;\n"]);return g=function(){return e},e}function b(){var e=(0,l.Z)(["\n  height: 40px;\n  width: 40px;\n  text-align: center;\n  line-height: 40px;\n  border-radius: 40px;\n  border: 1px solid #b9d8f0;\n  background-color: white;\n  font-weight: bold;\n"]);return b=function(){return e},e}function j(){var e=(0,l.Z)(["\n  height: 60px;\n  width: 200px;\n  background-color: #ebf7ff;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  border-radius: 5px;\n  padding: 20px;\n  cursor: pointer;\n  margin: 3px 0;\n  font-weight: ",";\n  color: ",";\n  background-color: ",";\n  border: ",";\n"]);return j=function(){return e},e}var y=d.default.div(j(),(function(e){return e.active&&"bold"}),(function(e){return e.active||e.visited?"#003366":"#B0D4ED"}),(function(e){return e.active||e.visited?"#BCE4FF":"#F5FBFF"}),(function(e){return e.active||e.visited?"1px solid #006fc4":"1px solid #B9D8F0"})),w=d.default.div(b()),S=d.default.p(g());function Z(e){var n=e.stageNumber,t=e.title,i=e.active,a=e.visited,o=e.handleClick,s=e.hasError;return(0,r.jsxs)(y,{active:i||!1,visited:a||!1,onClick:o,children:[(0,r.jsx)(w,{children:s?(0,r.jsx)(v.G,{icon:x.eHv,color:"red",title:"Some additional fields require your attention."}):n}),(0,r.jsx)(S,{children:t})]})}var k=t(64735);function C(){var e=(0,l.Z)(["\n  width: 824px;\n  max-width: 100%;\n"]);return C=function(){return e},e}var P=d.default.div(C());function O(e){var n=e.currentStage,t=e.setFormStage,i=e.errors,a=e.creatingNewForm,o=e.visited,s=e.stages;return(0,r.jsx)(P,{children:(0,r.jsx)(k.ZP,{cols:4,children:(0,r.jsx)(k.ZP.Row,{collapse:"992",gutter:[],children:null===s||void 0===s?void 0:s.map((function(e){return(0,r.jsx)(k.ZP.Col,{children:(0,r.jsx)(Z,{title:e.title,stageNumber:e.number+1,active:e.number===n,hasError:!!i[e.number],visited:o[e.number],handleClick:function(){return function(e){a()||t(e)}(e.number)}},e.number)},e.title)}))})})})}var F=t(17849);function T(e){var n=e.classNames,t=e.help,i=e.description,a=e.errors,o=e.children;return(0,r.jsxs)("div",{className:n,children:[i,o,a,t]})}var D=t(60873);function E(){var e=(0,l.Z)(["\n  font-weight: bold;\n  font-size: 1rem;\n  margin: 0;\n"]);return E=function(){return e},e}var R=d.default.legend(E());function q(e){var n=e.classNames,t=e.label,i=e.help,a=e.errors,o=e.children,s=e.schema,c=s.tooltipTitle,l=s.tooltipContent,u=s.hide,d=void 0===u?250:u,h=s.description,f=s.displayTitle;return(0,r.jsxs)("div",{className:n,children:[(0,r.jsxs)(R,{children:[f||t,"\xa0",l&&(0,r.jsx)(D.Z,{tooltipTitle:c,tooltipContent:l,hide:d})]}),h,o,a,i]})}var I=t(30454),N=t(57120);function A(){var e=(0,l.Z)(["\n  grid-column: 2;\n  color: #7f7f7f;\n"]);return A=function(){return e},e}function B(){var e=(0,l.Z)(["\n  font-weight: bold;\n  cursor: pointer;\n"]);return B=function(){return e},e}function U(){var e=(0,l.Z)(["\n  display: grid;\n  grid-template-columns: 20px 1fr;\n  align-items: center;\n  margin-top: ",";\n  cursor: pointer;\n"]);return U=function(){return e},e}var z=d.default.div(U(),I.SI),V=d.default.label(B()),L=d.default.p(A());function G(e){return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(z,{onClick:function(){window.location.hash=N.zw},children:[(0,r.jsx)(v.G,{style:{color:"#006fc4"},icon:x.KtF,onClick:e.onAddClick,title:"Add Item"}),(0,r.jsx)(V,{children:"Create a new team (optional)"}),(0,r.jsx)(L,{children:"Add other members to help manage the integration, and re-use your teams across multiple integrations"})]})})}var M=t(50308),W=t.n(M),_=t(69696);function Y(){var e=(0,l.Z)(["\n  display: flex;\n  align-items: center;\n\n  & .pg-modal-main {\n    margin: auto;\n  }\n\n  z-index: 100;\n"]);return Y=function(){return e},e}var H=(0,d.default)(_.ZP)(Y()),J=t(4826),K=t(74857),$=t(74150);function Q(){var e=(0,l.Z)(["\n  margin-bottom: 10px;\n"]);return Q=function(){return e},e}function X(){var e=(0,l.Z)(["\n  display: flex;\n  justify-content: space-between;\n"]);return X=function(){return e},e}function ee(){var e=(0,l.Z)(["\n  margin: 0;\n"]);return ee=function(){return e},e}var ne=d.default.h2(ee()),te=d.default.div(X()),re=(0,d.default)(K.ZP)(Q());var ie=function(e){var n=e.id,t=e.open,i=e.onChange,o=void 0===i?W():i,c=(0,u.useState)("server"),l=c[0],d=c[1],h=(0,u.useState)(null),f=h[0],p=h[1];(0,u.useEffect)((function(){window.location.hash=t?n:"#"}),[t]);var m=function(){d("server"),p(null),window.location.hash="#"},v=function(){var e=(0,s.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o("cancel"),m();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=(0,s.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o("server"===l&&!0===f?"confidential":"public"),m();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g="server"!==l||null!==f,b=g&&"server"===l&&!0===f;return(0,r.jsxs)(H,{id:n,children:[(0,r.jsx)(_.ZP.Header,{children:(0,r.jsx)(ne,{children:"Choosing between Public and Confidential Client types"})}),(0,r.jsxs)(_.ZP.Content,{children:[(0,r.jsx)("h3",{children:"Which type of application are you using?"}),(0,r.jsx)(re,{name:"type",label:"Server-side (ex. .Net, Java, PHP)",checked:"server"===l,onChange:function(){return d("server")}}),(0,r.jsx)(re,{name:"type",label:"Javascript (ex. Single Page Application, Hybrid Mobile)",checked:"javascript"===l,onChange:function(){return d("javascript")}}),(0,r.jsx)(re,{name:"type",label:"Other (ex. Embedded devices, Internet of Things (Apple TV)",checked:"other"===l,onChange:function(){return d("other")}}),"server"===l&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("br",{}),(0,r.jsx)("h3",{children:"Does the framework require a client secret, or have an option for a secret?"}),(0,r.jsx)(re,{name:"secret",label:"Yes",checked:!0===f,onChange:function(){return p(!0)}}),(0,r.jsx)(re,{name:"secret",label:"No",checked:!1===f,onChange:function(){return p(!1)}})]}),g&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("br",{}),(0,r.jsx)(r.Fragment,{children:b?(0,r.jsxs)("span",{children:["Based on your response, we recommend that you use a ",(0,r.jsx)("strong",{children:"confidential client."})," Confidential clients have back-end components that securely store an application's secret."]}):(0,r.jsxs)("span",{children:["Based on your response, we recommend that you use a ",(0,r.jsx)("strong",{children:"public client."})," Public clients do not use back-end secrets, but may support your application's architecture better."]})}),(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("span",{children:[" ","To learn more about the difference between confidential and public clients, visit our"," ",(0,r.jsx)($.ZP,{external:!0,href:"https://github.com/bcgov/ocp-sso/wiki/Using-Your-SSO-Client#confidential-vs-private-client",children:"wiki page."})]})}),(0,r.jsx)("br",{})]}),(0,r.jsx)("br",{}),(0,r.jsxs)(te,{children:[(0,r.jsx)(J.ZP,{type:"submit",variant:"primary-inverse",onClick:v,children:"Cancel"}),(0,r.jsx)(J.ZP,{type:"submit",variant:"primary",onClick:x,disabled:!g,children:"Save and Close"})]})]})]})};function ae(){var e=(0,l.Z)(["\n  margin-top: 5px;\n  margin-bottom: 5px;\n\n  & > input {\n    margin-right: 5px;\n  }\n"]);return ae=function(){return e},e}var oe=d.default.div(ae()),se=function(e){var n=e.id,t=e.value,i=e.onChange,a=e.onBlur,o=e.schema,s=o.enum,c=o.enumNames,l=(0,u.useState)(!1),d=l[0],h=l[1];return(0,r.jsxs)("div",{children:[c.map((function(e,o){return(0,r.jsxs)(oe,{children:[(0,r.jsx)("input",{type:"radio",id:"".concat(n,"-").concat(e),name:n,value:e,checked:s[o]===t,onChange:function(){return i(s[o])},onBlur:function(){return a(n,t)}}),(0,r.jsx)("label",{htmlFor:"".concat(n,"-").concat(e),children:e})]},e)})),(0,r.jsxs)("div",{children:[(0,r.jsx)($.ZP,{onClick:function(){return h(!0)},style:{cursor:"pointer"},children:"Click here"})," ","to get help deciding which client type to use."]}),(0,r.jsx)(ie,{id:"client-helper",open:d,onChange:function(e){h(!1),"cancel"!==e&&i("public"===e)}})]})},ce=function(e){return{identityProviders:{"ui:widget":"checkboxes","ui:disabled":"true","ui:help":"Currently we only support the onestopauth realm and IDPs cant be changed."},projectLead:{"ui:widget":"radio","ui:readonly":e,"ui:FieldTemplate":q},newToSso:{"ui:widget":"radio","ui:FieldTemplate":q},preferredEmail:{"ui:FieldTemplate":T,"ui:readonly":!0},publicAccess:{"ui:widget":se,"ui:FieldTemplate":q},projectName:{"ui:FieldTemplate":T,"ui:placeholder":"Project Name"},usesTeam:{"ui:widget":"radio","ui:FieldTemplate":q,"ui:readonly":e},realm:{"ui:widget":"radio","ui:FieldTemplate":q,"ui:default":"onestopauth","ui:readonly":e},bceidTo:{"ui:FieldTemplate":T,"ui:readonly":!0},bceidCc:{"ui:FieldTemplate":T},bceidBody:{"ui:widget":"textarea"},dev:{"ui:readonly":!0,"ui:FieldTemplate":q},createTeam:{"ui:FieldTemplate":G}}},le=t(1993),ue=t(98806),de=t(6645),he=t(3083),fe=t(11163),pe=t(6434),me=t(25879),ve=t(92665),xe=t(12070),ge={comment:{"ui:FieldTemplate":T,"ui:widget":"textarea"}},be=t(8366);function je(e){e.bceidEmailDetails,e.setBceidEmailDetails;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{children:"Once you submit the request, both you and the BCeID team will receive an email with your request details."}),(0,r.jsx)("p",{children:"On a best-effort basis, the BCeID team will endeavour to reach out to you within 2-3 business days to schedule an on-boarding meeting.\xa0"})]})}var ye=t(85330);var we=(0,me.l)((function(e){var n=e.formData,t=e.setFormData,i=e.setErrors,c=e.alert,l=e.isAdmin,d=e.teams,h=(0,u.useState)({}),f=h[0],m=h[1],v=(0,fe.useRouter)(),x=(0,pe.Jx)(n.realm),g=x&&n.prod,b=function(){var e=(0,s.Z)(a().mark((function e(){var t,r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,de.WN)(n,!0);case 3:t=e.sent,r=(0,o.Z)(t,2),(i=r[1])?c.show({variant:"danger",fadeOut:1e4,closable:!0,content:(0,pe.nU)(i).message}):(c.show({variant:"success",fadeOut:1e4,closable:!0,content:"Request ID:".concat((0,p.padStart)(String(n.id),8,"0")," is successfully submitted!")}),v.push({pathname:l?"/admin-dashboard":"/my-requests",query:{id:n.id}})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=l?(0,be.K)(d):(0,be.a)(d),t=(0,pe.G$)(n,e);if(Object.keys(t).length>0)return c.show({variant:"danger",fadeOut:1e4,closable:!0,content:"There were errors with your submission. Please see the navigation tabs above for the form pages with errors."}),i(t);window.location.hash="confirmation-modal"},y=function(){var e=l?"/admin-dashboard":"/my-requests";v.push(e)},w=l?"Cancel":"Save and Close",S=l?"Update":"Submit";return(0,r.jsxs)("div",{children:[(0,r.jsx)(ye.wk,{title:"Please review your information to make sure it is correct.",number:1,children:(0,r.jsx)(ve.Z,{request:n,hasBceid:x||!1,isAdmin:l})}),(0,r.jsx)(ye.wk,{title:"Your ".concat(x?"Dev and/or Test":""," environment(s) will be provided by the SSO Pathfinder team."),number:2,children:(0,r.jsx)("p",{children:"Once you submit the request, access will be provided in 20 minutes or fewer."})}),l&&(0,r.jsx)(F.Z,{schema:xe.Z,uiSchema:ge,liveValidate:!0,onChange:function(e){t(e.formData)},formData:n,children:(0,r.jsx)(r.Fragment,{})}),g?(0,r.jsxs)(ye.wk,{number:3,title:"Your Prod environment will be provided by the BCeID Team",showLine:!1,children:[(0,r.jsx)(je,{bceidEmailDetails:f,setBceidEmailDetails:m}),(0,r.jsx)(le.Z,{text:{continue:S,back:w},show:!0,handleSubmit:j,handleBackClick:y})]}):(0,r.jsx)(le.Z,{text:{continue:S,back:w},show:!0,handleSubmit:j,handleBackClick:y}),(0,r.jsx)(ue.Z,{id:"confirmation-modal",content:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{children:"Are you sure you're ready to submit your request?"}),!l&&(0,r.jsxs)("p",{children:["If you need to change anything after submitting your request, please contact our"," ",(0,r.jsx)($.ZP,{external:!0,href:"https://chat.developer.gov.bc.ca/channel/sso/",children:"#SSO channel"})," ","or email ",(0,r.jsx)($.ZP,{href:"mailto:bcgov.sso@gov.bc.ca",children:"bcgov.sso@gov.bc.ca"})]})]}),onConfirm:b})]})})),Se=t(80721),Ze=t(94679),ke=t(70513),Ce=function(){var e=(0,s.Z)(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke.e.get("teams").then((function(e){return e.data}));case 3:return n=e.sent,e.abrupt("return",[n,null]);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",(0,ke.z)(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),Pe=function(){var e=(0,s.Z)(a().mark((function e(n){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke.e.post("teams",n).then((function(e){return e.data}));case 3:return t=e.sent,e.abrupt("return",[t,null]);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",(0,ke.z)(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n){return e.apply(this,arguments)}}(),Oe=t(75093);var Fe=t(40355);function Te(e){return function(e){if(Array.isArray(e))return(0,Oe.Z)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||(0,Fe.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var De,Ee=t(11915),Re=t(35611),qe=new Uint8Array(16);function Ie(){if(!De&&!(De="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return De(qe)}var Ne=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var Ae=function(e){return"string"===typeof e&&Ne.test(e)},Be=[],Ue=0;Ue<256;++Ue)Be.push((Ue+256).toString(16).substr(1));var ze=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=(Be[e[n+0]]+Be[e[n+1]]+Be[e[n+2]]+Be[e[n+3]]+"-"+Be[e[n+4]]+Be[e[n+5]]+"-"+Be[e[n+6]]+Be[e[n+7]]+"-"+Be[e[n+8]]+Be[e[n+9]]+"-"+Be[e[n+10]]+Be[e[n+11]]+Be[e[n+12]]+Be[e[n+13]]+Be[e[n+14]]+Be[e[n+15]]).toLowerCase();if(!Ae(t))throw TypeError("Stringified UUID is invalid");return t};var Ve=function(e,n,t){var r=(e=e||{}).random||(e.rng||Ie)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,n){t=t||0;for(var i=0;i<16;++i)n[t+i]=r[i];return n}return ze(r)},Le=t(31607);function Ge(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Me(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Ge(Object(t),!0).forEach((function(n){(0,c.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ge(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function We(){var e=(0,l.Z)(["\n  display: flex;\n  justify-content: space-between;\n  margin-top: 20px;\n  & button {\n    min-width: 180px;\n  }\n"]);return We=function(){return e},e}function _e(){var e=(0,l.Z)(["\n  align-self: center;\n  color: red;\n  cursor: pointer;\n"]);return _e=function(){return e},e}function Ye(){var e=(0,l.Z)(["\n  grid-template-columns: 2fr 2fr 1fr;\n  align-items: end;\n  margin-bottom: 20px;\n"]);return Ye=function(){return e},e}function He(){var e=(0,l.Z)(["\n  max-height: 50vh;\n  overflow-y: scroll;\n"]);return He=function(){return e},e}function Je(){var e=(0,l.Z)(["\n  margin: 10px 0;\n  cursor: pointer;\n\n  & span {\n    margin-left: 5px;\n  }\n"]);return Je=function(){return e},e}function Ke(){var e=(0,l.Z)(["\n  border-bottom: 1px solid black;\n  margin: 10px 0;\n  grid-column: 1 / 3;\n"]);return Ke=function(){return e},e}function $e(){var e=(0,l.Z)(["\n  & .pg-select-wrapper {\n    height: 44px;\n  }\n"]);return $e=function(){return e},e}function Qe(){var e=(0,l.Z)(["\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  align-items: end;\n  margin-bottom: 20px;\n  grid-gap: 1em;\n"]);return Qe=function(){return e},e}var Xe=d.default.div(Qe()),en=(0,d.default)(Re.ZP)($e()),nn=d.default.div(Ke()),tn=d.default.span(Je()),rn=d.default.section(He()),an=(0,d.default)(Xe)(Ye()),on=(0,d.default)(v.G)(_e()),sn=d.default.div(We());function cn(e){var n=e.onSubmit,t=(0,u.useState)([{email:"",role:"user",id:String(Ve())}]),i=t[0],c=t[1],l=(0,u.useState)(null),d=l[0],h=l[1],f=(0,u.useState)(!1),p=f[0],m=f[1],g=function(){var e=(0,s.Z)(a().mark((function e(){var t,r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.next=3,Pe({name:d});case 3:return t=e.sent,r=(0,o.Z)(t,2),(i=r[1])&&console.error(i),e.next=9,n();case 9:m(!1),window.location.hash="#";case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,r.jsxs)("div",{children:[(0,r.jsx)(Ee.ZP,{label:"Team Name",onChange:function(e){h(e.target.value)}}),(0,r.jsx)("br",{}),(0,r.jsx)("strong",{children:"Team Members"}),(0,r.jsxs)("p",{children:["Enter your team member\u2019s email address and they will be sent an invitation to join the project. Once they accept the invitation, they will have access to your project. Their invitation will expire in"," ",(0,r.jsx)("strong",{children:"2 business days"}),"."]}),(0,r.jsx)("br",{}),(0,r.jsxs)(rn,{children:[(0,r.jsxs)(Xe,{children:[(0,r.jsx)("strong",{children:"Member"}),(0,r.jsx)("strong",{children:"Role"}),(0,r.jsx)(nn,{})]}),i.map((function(e,n){return(0,r.jsxs)(an,{children:[(0,r.jsx)(Ee.ZP,{placeholder:"Enter email address",onChange:function(e){return function(e,n){var t=Me({},i[e]);t.email=n.target.value;var r=Te(i);r[e]=t,c(r)}(n,e)},value:e.email}),(0,r.jsxs)(en,{label:"Role",onChange:function(e){return function(e,n){var t=Me({},i[e]);t.role=n.target.value;var r=Te(i);r[e]=t,c(r)}(n,e)},children:[(0,r.jsx)("option",{value:"user",children:"user"}),(0,r.jsx)("option",{value:"admin",children:"admin"})]}),0!==n&&(0,r.jsx)(on,{icon:x.uMC,onClick:function(){return e=n,void c(i.filter((function(n,t){return t!==e})));var e},title:"Delete"})]},e.id)})),(0,r.jsxs)(tn,{onClick:function(){c([].concat(Te(i),[{email:"",role:"user",id:String(Ve())}]))},children:[(0,r.jsx)(v.G,{style:{color:"#006fc4"},icon:x.KtF,title:"Add Item"}),(0,r.jsx)("span",{children:"Add another team member"})]})]}),(0,r.jsxs)(sn,{children:[(0,r.jsx)(ye.zx,{variant:"secondary",onClick:function(){window.location.hash="#"},children:"Cancel"}),(0,r.jsx)(ye.zx,{type:"button",onClick:g,children:p?(0,r.jsx)(Le.Z,{type:"Grid",color:"#FFF",height:18,width:50,visible:p}):"Send Invitation"})]})]})}function ln(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function un(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ln(Object(t),!0).forEach((function(n){(0,c.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ln(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function dn(){var e=(0,l.Z)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  min-height: 150px;\n"]);return dn=function(){return e},e}function hn(){var e=(0,l.Z)(["\n  margin: 0;\n"]);return hn=function(){return e},e}var fn=d.default.p(hn()),pn=d.default.div(dn());var mn=(0,me.l)((function(e){var n=e.currentUser,t=void 0===n?{}:n,i=e.request,c=e.alert,l=e.isAdmin,d=(0,u.useState)(i||{}),h=d[0],f=d[1],p=(0,u.useState)(i?1:0),v=p[0],g=p[1],b=(0,u.useState)(!1),j=b[0],y=b[1],w=(0,u.useState)(void 0),S=w[0],Z=w[1],k=(0,u.useState)(!1),C=k[0],P=k[1],T=(0,u.useState)({}),D=T[0],E=T[1],R=(0,u.useState)(i?{0:!0}:{}),q=R[0],I=R[1],A=(0,u.useState)([]),B=A[0],U=A[1],z=(0,fe.useRouter)(),V=(0,pe.J$)({isAdmin:l,formStage:v,teams:B}),L=V.stages,G=V.stageTitle,M=V.schema,W=V.schemas,_=!l&&(0!==v||h.usesTeam||h.projectLead);(0,u.useEffect)((function(){h.preferredEmail||f(un(un({},h),{},{preferredEmail:t.email||""}))}),[t]);var Y=function(){var e=(0,s.Z)(a().mark((function e(){var n,t,r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ce();case 2:n=e.sent,t=(0,o.Z)(n,2),r=t[0],(i=t[1])?console.error(i):U(r||[]);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,u.useEffect)((function(){Y()}),[]);var H=function(e){q[v]=!0,3===e&&(q[0]=!0,q[1]=!0,q[2]=!0);var n=(0,pe.G$)(h,W,q);E(n),g(e),I(q),c.hide()},J=function(){return z.route.endsWith("/request")},K=ce(!J()),Q=function(){var e=(0,s.Z)(a().mark((function e(){var n,t,r,i,s,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y(!0),e.prev=1,!J()){e.next=19;break}return e.next=5,(0,de.hG)(h);case 5:if(n=e.sent,t=(0,o.Z)(n,2),r=t[0],i=t[1],s=(r||{}).id,!i&&s){e.next=13;break}return y(!1),e.abrupt("return");case 13:return c=l?"/admin-dashboard":"/request/".concat(s),e.next=16,z.push({pathname:c});case 16:f(un(un({},h),{},{id:s})),e.next=22;break;case 19:return e.next=21,(0,de.WN)(h);case 21:X();case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(1),console.error(e.t0);case 27:y(!1);case 28:case"end":return e.stop()}}),e,null,[[1,24]])})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=(0,s.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==v){e.next=5;break}if(!J()){e.next=5;break}return q[v]=!0,I(q),e.abrupt("return");case 5:H(v+1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ee=function(){var e=(0,s.Z)(a().mark((function e(n,t){var r,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!J()&&!l){e.next=2;break}return e.abrupt("return");case 2:if(!i){e.next=11;break}return P(!0),e.next=6,(0,de.WN)(un(un({},h),{},{id:i.id}));case 6:r=e.sent,s=(0,o.Z)(r,2),s[1]||Z({content:"Last saved at ".concat((new Date).toLocaleString()),error:!1}),P(!1);case 11:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),ne=i?"Save and Close":"Cancel";return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(pn,{children:[(0,r.jsx)(m,{formStage:v,id:h.id}),(0,r.jsx)(O,{currentStage:v,setFormStage:H,errors:D,creatingNewForm:J,visited:q,stages:L}),(0,r.jsxs)(fn,{children:["If new to SSO, please visit"," ",(0,r.jsx)($.ZP,{external:!0,href:"https://github.com/bcgov/ocp-sso/wiki/Using-Your-SSO-Client",children:"github"})," ","for more information."]})]}),"Terms and conditions"===G&&(0,r.jsx)(Se.Z,{}),N.Hg.includes(G)&&(0,r.jsx)(we,{formData:h,setErrors:E,errors:D,visited:q,saving:C,saveMessage:S,isAdmin:l,setFormData:f,teams:B}),N.al.includes(G)&&(0,r.jsx)(F.Z,{schema:M,uiSchema:K,onChange:function(e){var n=!1===e.formData.projectLead&&!1===e.formData.usesTeam,t=!1===h.usesTeam&&!0===e.formData.usesTeam;f(t?un(un({},e.formData),{},{projectLead:void 0}):e.formData),n&&(window.location.hash="info-modal")},onSubmit:Q,formData:h,ArrayFieldTemplate:he.Z,onBlur:ee,liveValidate:q[v]||l,validate:Ze.M,children:(0,r.jsx)(le.Z,{formSubmission:0===v,text:{continue:"Next",back:ne},show:_,loading:j,handleSubmit:X,handleBackClick:function(){var e=l?"/admin-dashboard":"/my-requests";z.push({pathname:e})},saving:C,saveMessage:S})}),"Requester Info"===G&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ue.Z,{id:"info-modal",content:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{children:"If you are not accountable for this project, please refer this request to someone who is."}),(0,r.jsx)("p",{children:" Only the person who is responsible for this project can submit the intergration request."})]}),icon:x.sqG,onConfirm:function(){window.location.hash="#"},confirmText:"Okay",showCancel:!1}),(0,r.jsx)(ue.Z,{title:"Create a new team",icon:null,onConfirm:function(){return console.log("confirm")},id:N.zw,content:(0,r.jsx)(cn,{onSubmit:Y}),showCancel:!1,showConfirm:!1,closable:!0})]})]})}))}}]);